language: python
python:
  - "3.6"

addons:
  postgresql: "10.0"

services:
  - postgresql

cache:
  directories:
    - $HOME/.cache/pip/
    - $HOME/.cache/pipenv/

install:
  - pip install pipenv
  - pipenv sync --dev

before_script:
  - psql -c 'create database test_db;' -U postgres
script:
  - pytest --cov
